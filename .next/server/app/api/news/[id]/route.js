"use strict";(()=>{var e={};e.id=9175,e.ids=[9175],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},7659:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>g,originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>_,routeModule:()=>w,serverHooks:()=>p,staticGenerationAsyncStorage:()=>k,staticGenerationBailout:()=>E});var i={};a.r(i),a.d(i,{DELETE:()=>y,GET:()=>c,PUT:()=>m});var r=a(5419),s=a(9108),n=a(9678),o=a(2002),l=a(6176),u=a(9413);let d=new(a(7935)).TQ;async function c(e,{params:t}){try{let{id:e}=t;if(d.isAvailable())try{let t=await d.executeQueryFirst("SELECT * FROM news WHERE id = ? OR slug = ?",[e,e]);if(t.success&&t.data)return await d.executeQuery("UPDATE news SET view_count = view_count + 1 WHERE id = ?",[t.data.id]),(0,u.x_)(t.data,"News article fetched successfully")}catch(e){console.error("D1 news fetch error:",e)}console.log("⚠️ D1 database not available - checking mock news");let a=[{id:"news-001",title:"Yeni BRIX \xd6l\xe7\xfcm Teknolojisi Tanıtıldı",slug:"yeni-brix-olcum-teknolojisi-tanitildi",summary:"Protek Analitik'in geliştirdiği yeni nesil BRIX \xf6l\xe7\xfcm cihazları, end\xfcstriyel uygulamalarda hassasiyet standardını yeniden belirliyor.",content:"Gıda ve i\xe7ecek end\xfcstrisinde kritik \xf6nem taşıyan BRIX değeri \xf6l\xe7\xfcmlerinde devrim niteliğinde bir yenilik getiren Protek Analitik, yeni nesil \xf6l\xe7\xfcm cihazlarını tanıttı. Bu teknoloji, mevcut standartları aşan hassasiyet ve g\xfcvenilirlik sunuyor.",category:"sirket-haberleri",author:"Protek Analitik",publish_date:new Date(Date.now()-1728e5).toISOString().split("T")[0],image_url:"/images/news/brix-technology.jpg",tags:"BRIX,\xf6l\xe7\xfcm,teknoloji,gıda",is_featured:!0,is_published:!0,view_count:245,meta_title:"Yeni BRIX \xd6l\xe7\xfcm Teknolojisi | Protek Analitik",meta_description:"End\xfcstriyel BRIX \xf6l\xe7\xfcm teknolojilerinde yeni standartlar",meta_keywords:"BRIX, \xf6l\xe7\xfcm cihazı, teknoloji",created_at:new Date(Date.now()-1728e5).toISOString(),updated_at:new Date(Date.now()-1728e5).toISOString()},{id:"news-002",title:"Su Aktivitesi \xd6l\xe7\xfcmlerinde Kalibrasyon İpu\xe7ları",slug:"su-aktivitesi-olcumlerinde-kalibrasyon-ipuclari",summary:"Doğru su aktivitesi \xf6l\xe7\xfcmleri i\xe7in kalibrasyon s\xfcre\xe7lerinin \xf6nemi ve pratik uygulamalar.",content:"Su aktivitesi \xf6l\xe7\xfcmlerinde g\xfcvenilir sonu\xe7lar elde etmek i\xe7in kalibrasyon protokolleri kritik \xf6nem taşır. Bu rehberde, laboratuvar ortamında doğru kalibrasyon teknikleri ve sık karşılaşılan sorunların \xe7\xf6z\xfcmleri detaylandırılmaktadır.",category:"sektor-guncel",author:"Dr. Ahmet \xd6zkan",publish_date:new Date(Date.now()-432e6).toISOString().split("T")[0],image_url:"/images/news/water-activity.jpg",tags:"su aktivitesi,kalibrasyon,\xf6l\xe7\xfcm",is_featured:!1,is_published:!0,view_count:156,meta_title:"Su Aktivitesi Kalibrasyon Rehberi | Protek Analitik",meta_description:"Su aktivitesi \xf6l\xe7\xfcmlerinde kalibrasyon i\xe7in pratik ipu\xe7ları",meta_keywords:"su aktivitesi, kalibrasyon, \xf6l\xe7\xfcm",created_at:new Date(Date.now()-432e6).toISOString(),updated_at:new Date(Date.now()-432e6).toISOString()},{id:"news-003",title:"Laboratuvar Otomasyonunda Başarı Hikayesi",slug:"laboratuvar-otomasyonunda-basari-hikayesi",summary:"XYZ Gıda Şirketi ile ger\xe7ekleştirilen laboratuvar otomasyon projesi ve elde edilen verimlilik artışı.",content:"Modern laboratuvar y\xf6netiminde otomasyon \xe7\xf6z\xfcmlerinin rol\xfc giderek artıyor. XYZ Gıda Şirketi ile hayata ge\xe7irilen proje, %40 verimlilik artışı ve %60 hata azalması sağladı.",category:"basari-hikayeleri",author:"Protek Analitik",publish_date:new Date(Date.now()-6048e5).toISOString().split("T")[0],image_url:"/images/news/lab-automation.jpg",tags:"laboratuvar,otomasyon,başarı",is_featured:!0,is_published:!0,view_count:324,meta_title:"Laboratuvar Otomasyon Başarı Hikayesi | Protek Analitik",meta_description:"XYZ Gıda ile laboratuvar otomasyon projesi başarı hikayesi",meta_keywords:"laboratuvar, otomasyon, başarı hikayesi",created_at:new Date(Date.now()-6048e5).toISOString(),updated_at:new Date(Date.now()-6048e5).toISOString()}].find(t=>t.id===e||t.slug===e);if(a)return(0,u.x_)(a,"News article fetched successfully (development mode)");return(0,u.jl)("News article not found","NOT_FOUND",404)}catch(e){return console.error("News fetch error:",e),u.Gl.SERVER_ERROR("Failed to fetch news article")}}async function m(e,{params:t}){try{let a=e.cookies.get("accessToken")?.value||e.headers.get("authorization")?.replace("Bearer ","");if(!a)return u.C4.MISSING_TOKEN();let i=await o.e8.verifyAccessToken(a);if(!i.success)return u.C4.INVALID_TOKEN();if(!o.e8.hasRole(i.user,"editor"))return u.C4.INSUFFICIENT_PERMISSIONS();let{id:r}=t,s=await e.json();if(d.isAvailable())try{let e=await d.executeQueryFirst("SELECT * FROM news WHERE id = ?",[r]);if(!e.success||!e.data)return(0,u.jl)("News article not found","NOT_FOUND",404);let t={updated_at:new Date().toISOString()};s.title&&(t.title=s.title.trim()),s.slug&&(t.slug=s.slug),void 0!==s.summary&&(t.summary=s.summary?.trim()||""),s.content&&(t.content=l.v$.sanitizeHtml(s.content)),s.category&&(t.category=s.category),s.author&&(t.author=s.author),s.publish_date&&(t.publish_date=s.publish_date),void 0!==s.image_url&&(t.image_url=s.image_url||""),void 0!==s.tags&&(t.tags=Array.isArray(s.tags)?s.tags.join(","):"string"==typeof s.tags?s.tags:""),void 0!==s.is_featured&&(t.is_featured=!!s.is_featured),void 0!==s.is_published&&(t.is_published=!!s.is_published),void 0!==s.meta_title&&(t.meta_title=s.meta_title||""),void 0!==s.meta_description&&(t.meta_description=s.meta_description||""),void 0!==s.meta_keywords&&(t.meta_keywords=s.meta_keywords||"");let a=await d.updateRecord("news",r,t);if(a.success){let e=await d.executeQueryFirst("SELECT * FROM news WHERE id = ?",[r]);return console.log(`News updated in D1: ${r} by user ${i.user.username}`),(0,u.x_)(e.data,"News article updated successfully")}console.error("D1 update failed:",a.error)}catch(e){console.error("D1 news update error:",e)}console.log("⚠️ D1 database not available - simulating news update");let n=new Date().toISOString(),c={id:r,...s,updated_at:n};return console.log(`News updated: ${r} by user ${i.user.username}`),(0,u.x_)(c,"News article updated successfully (development mode)")}catch(e){return console.error("News update error:",e),u.Gl.SERVER_ERROR("Failed to update news article")}}async function y(e,{params:t}){try{let a=e.cookies.get("accessToken")?.value||e.headers.get("authorization")?.replace("Bearer ","");if(!a)return u.C4.MISSING_TOKEN();let i=await o.e8.verifyAccessToken(a);if(!i.success)return u.C4.INVALID_TOKEN();if(!o.e8.hasRole(i.user,"admin"))return u.C4.INSUFFICIENT_PERMISSIONS();let{id:r}=t;if(d.isAvailable())try{let e=await d.executeQueryFirst("SELECT * FROM news WHERE id = ?",[r]);if(!e.success||!e.data)return(0,u.jl)("News article not found","NOT_FOUND",404);let t=await d.deleteRecord("news",r);if(t.success)return console.log(`News deleted from D1: ${r} by user ${i.user.username}`),(0,u.x_)(null,"News article deleted successfully");console.error("D1 delete failed:",t.error)}catch(e){console.error("D1 news delete error:",e)}return console.log("⚠️ D1 database not available - simulating news deletion"),console.log(`News deleted: ${r} by user ${i.user.username}`),(0,u.x_)(null,"News article deleted successfully (development mode)")}catch(e){return console.error("News delete error:",e),u.Gl.SERVER_ERROR("Failed to delete news article")}}let w=new r.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/news/[id]/route",pathname:"/api/news/[id]",filename:"route",bundlePath:"app/api/news/[id]/route"},resolvedPagePath:"/Users/denizhan/Documents/Windsurf/protekanalitik/src/app/api/news/[id]/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:_,staticGenerationAsyncStorage:k,serverHooks:p,headerHooks:g,staticGenerationBailout:E}=w,h="/api/news/[id]/route";function v(){return(0,n.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:k})}},9413:(e,t,a)=>{a.d(t,{$X:()=>l,C4:()=>n,Gl:()=>o,MN:()=>u,jl:()=>s,x_:()=>r});var i=a(8070);function r(e,t,a){let r={success:!0,message:t,data:e,meta:{timestamp:new Date().toISOString(),version:"1.0.0",...a}};return i.Z.json(r)}function s(e,t,a=400,r){let s={success:!1,error:e,code:t,meta:{timestamp:new Date().toISOString(),version:"1.0.0",...r}};return i.Z.json(s,{status:a})}let n={MISSING_TOKEN:()=>s("Authentication token required","MISSING_TOKEN",401),INVALID_TOKEN:()=>s("Invalid or expired token","INVALID_TOKEN",401),INSUFFICIENT_PERMISSIONS:()=>s("Insufficient permissions","INSUFFICIENT_PERMISSIONS",403),RATE_LIMITED:e=>{let t=s("Too many requests. Please try again later.","RATE_LIMITED",429);return e&&t.headers.set("Retry-After",e.toString()),t}},o={NOT_FOUND:(e="Resource")=>s(`${e} not found`,"NOT_FOUND",404),ALREADY_EXISTS:(e="Resource")=>s(`${e} already exists`,"ALREADY_EXISTS",409),SERVER_ERROR:(e="Internal server error")=>s(e,"SERVER_ERROR",500),BAD_REQUEST:(e="Bad request")=>s(e,"BAD_REQUEST",400),FORBIDDEN:(e="Access forbidden")=>s(e,"FORBIDDEN",403)},l={CREATED:(e,t="Resource")=>r(e,`${t} created successfully`),UPDATED:(e,t="Resource")=>r(e,`${t} updated successfully`),DELETED:(e="Resource")=>r(null,`${e} deleted successfully`),FETCHED:(e,t="Resource")=>r(e,`${t} fetched successfully`)};function u(e,t){let a=t.filter(t=>void 0===e[t]||null===e[t]||""===e[t]);return{isValid:0===a.length,missingFields:a}}class d{static{this.requests=new Map}static isRateLimited(e,t=100,a=6e4){let i=Date.now(),r=this.requests.get(e);return!r||i>r.resetTime?(this.requests.set(e,{count:1,resetTime:i+a}),!1):r.count>=t||(r.count++,!1)}static getRemainingRequests(e,t=100){let a=this.requests.get(e);return a?Math.max(0,t-a.count):t}static cleanup(){let e=Date.now();for(let[t,a]of Array.from(this.requests.entries()))e>a.resetTime&&this.requests.delete(t)}}"undefined"!=typeof setInterval&&setInterval(()=>{d.cleanup()},3e5)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[1638,6206,5669,6458],()=>a(7659));module.exports=i})();