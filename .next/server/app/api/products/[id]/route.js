"use strict";(()=>{var e={};e.id=3898,e.ids=[3898],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},7349:(e,a,r)=>{r.r(a),r.d(a,{headerHooks:()=>b,originalPathname:()=>E,patchFetch:()=>h,requestAsyncStorage:()=>_,routeModule:()=>f,serverHooks:()=>v,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>D});var t={};r.r(t),r.d(t,{DELETE:()=>g,GET:()=>k,PUT:()=>p});var i=r(5419),o=r(9108),s=r(9678),n=r(8070),l=r(2002),u=r(7935);function d(e,a="Success",r={}){return n.Z.json({success:!0,message:a,data:e,meta:r})}function c(e,a="ERROR",r=500){return n.Z.json({success:!1,error:e,code:a},{status:r})}let m=[{id:"brix-001",name:"Digital Refraktometre DR-A1",description:"Brix ve refraktif indeks tayini i\xe7in otomatik sıcaklık kompanzasyonlu dijital refraktometre",overview:"Gıda end\xfcstrisinde şeker i\xe7eriği \xf6l\xe7\xfcm\xfc i\xe7in kullanılan hassas refraktometre",category_id:"laboratuvar-ekipmanlari",subcategory_id:"fiziksel-analiz",image:"/images/refraktometre-dr-a1.jpg",images:["/images/refraktometre-dr-a1.jpg","/images/refraktometre-dr-a1-detail.jpg"],features:["Otomatik sıcaklık kompanzasyonu (ATC)","Su ge\xe7irmez tasarım (IP65)","Kolay kalibasyon","LED ışık kaynağı","0-32% Brix \xf6l\xe7\xfcm aralığı"],applications:["Gıda end\xfcstrisi","İ\xe7ecek \xfcretimi","Şeker analizi","Meyve suyu kontrol\xfc","Kalite kontrol"],specifications:{"\xd6l\xe7\xfcm Aralığı":"0-32% Brix",Çözünürlük:"0.2% Brix",Doğruluk:"\xb10.2% Brix","Sıcaklık Kompanzasyonu":"10-40\xb0C","Su Ge\xe7irmezlik":"IP65","Pil \xd6mr\xfc":"2000 saat"},price:"₺8,500",is_warrantied:!0,has_free_shipping:!0,is_featured:!0,is_active:!0,display_order:1,meta_title:"Digital Refraktometre DR-A1 - Brix \xd6l\xe7\xfcm\xfc",meta_description:"Professional brix \xf6l\xe7\xfcm\xfc i\xe7in otomatik sıcaklık kompanzasyonlu digital refraktometre",meta_keywords:"refraktometre, brix, şeker \xf6l\xe7\xfcm\xfc, digital refraktometre",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"su-aktivite-001",name:"AquaLab 4TE Su Aktivite \xd6l\xe7er",description:"Gıda g\xfcvenliği ve kalite kontrol\xfc i\xe7in y\xfcksek hassasiyetli su aktivite \xf6l\xe7er",overview:"Mikrobiyal gelişimi tahmin etmek ve raf \xf6mr\xfcn\xfc belirlemek i\xe7in kritik su aktivite \xf6l\xe7\xfcm\xfc",category_id:"laboratuvar-ekipmanlari",subcategory_id:"fiziksel-analiz",image:"/images/aqualab-4te.jpg",images:["/images/aqualab-4te.jpg","/images/aqualab-4te-detail.jpg"],features:["\xb10.003 aw doğruluk","Hızlı \xf6l\xe7\xfcm (5 dakika)","Otomatik kalibrasyon","USB bağlantısı","Dahili yazıcı"],applications:["Gıda g\xfcvenliği","Kalite kontrol","Raf \xf6mr\xfc \xe7alışmaları","Form\xfclasyon geliştirme","Araştırma-geliştirme"],specifications:{"\xd6l\xe7\xfcm Aralığı":"0.030 - 1.000 aw",Doğruluk:"\xb10.003 aw",Çözünürlük:"0.001 aw","\xd6l\xe7\xfcm S\xfcresi":"5 dakika","Sıcaklık Aralığı":"15-50\xb0C","\xd6rneklem Hacmi":"7 ml"},price:"₺45,000",is_warrantied:!0,has_free_shipping:!0,is_featured:!0,is_active:!0,display_order:2,meta_title:"AquaLab 4TE Su Aktivite \xd6l\xe7er - Gıda G\xfcvenliği",meta_description:"Professional su aktivite \xf6l\xe7er ile gıda g\xfcvenliği ve kalite kontrol\xfc",meta_keywords:"su aktivite, water activity, aqualab, gıda g\xfcvenliği",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"magnetik-karistirici-ms300",name:"Magnetik Karıştırıcı MS-300",description:"Laboratuvar \xe7\xf6zeltilerinin homojen karıştırılması i\xe7in dijital magnetik karıştırıcı",overview:"Hassas karıştırma hızı kontrol\xfc ile laboratuvar \xe7alışmaları i\xe7in ideal",category_id:"laboratuvar-ekipmanlari",subcategory_id:"genel-lab",image:"/images/magnetik-karistirici-ms300.jpg",images:["/images/magnetik-karistirici-ms300.jpg","/images/magnetik-karistirici-ms300-detail.jpg"],features:["Dijital hız kontrol\xfc","LED g\xf6sterge","Sessiz \xe7alışma","Anti-kayma taban","Zamanlayıcı"],applications:["\xc7\xf6zelti hazırlama","Titrasyonlar","Ekstraksiyon","Reaksiyon karıştırma","Analitik kimya"],specifications:{"Hız Aralığı":"50-1500 rpm","Karıştırma Kapasitesi":"3000 ml","Plaka Boyutu":"135x135 mm",Güç:"25W",Zamanlayıcı:"1-999 dakika",Boyutlar:"200x200x85 mm"},price:"₺3,200",is_warrantied:!0,has_free_shipping:!0,is_featured:!1,is_active:!0,display_order:3,meta_title:"Magnetik Karıştırıcı MS-300 - Dijital Kontrol",meta_description:"Professional magnetik karıştırıcı ile laboratuvar \xe7\xf6zeltilerinin hassas karıştırılması",meta_keywords:"magnetik karıştırıcı, magnetic stirrer, laboratuvar",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];async function k(e,{params:a}){try{let{id:e}=a;if(null!==u.ki)try{let a=await u.cf.getProductById(e);if(!a)return c("Product not found","PRODUCT_NOT_FOUND",404);return d(a,"Product fetched successfully",{source:"d1_database",product_id:e})}catch(e){console.error("D1 database error:",e)}console.log("⚠️ D1 database not available - using fallback data");let r=m.find(a=>a.id===e);if(r)return d(r,"Product fetched successfully (development mode)",{source:"fallback",product_id:e});return c("Product not found in development mode","PRODUCT_NOT_FOUND_DEV",404)}catch(e){return console.error("❌ GET /api/products/[id] error:",e),c("Error fetching product","FETCH_ERROR",500)}}async function p(e,{params:a}){try{let r=e.cookies.get("accessToken")?.value||e.headers.get("authorization")?.replace("Bearer ","");if(!r)return c("Authentication required","AUTH_REQUIRED",401);let t=await l.e8.verifyAccessToken(r);if(!t.success||!t.user)return c("Invalid or expired token","INVALID_TOKEN",401);if(!["super_admin","admin","editor"].includes(t.user.role))return c("Insufficient permissions","INSUFFICIENT_PERMISSIONS",403);let i=a.id,o=await e.json();if(!o.name)return c("Product name is required","VALIDATION_ERROR",400);if(null!==u.ki)try{let e=await u.cf.updateProduct(i,o);return d(e,"Product updated successfully",{source:"d1_database",updated_by:t.user.username})}catch(e){return console.error("D1 database error:",e),c("Failed to update product in database","DATABASE_ERROR",500)}return console.log("⚠️ D1 database not available - mock update"),d({id:i,...o,updated_at:new Date().toISOString()},"Product updated successfully (development mode)",{source:"fallback",updated_by:t.user.username})}catch(e){return console.error("❌ PUT /api/products/[id] error:",e),c("Error updating product","UPDATE_ERROR",500)}}async function g(e,{params:a}){try{let r=e.cookies.get("accessToken")?.value||e.headers.get("authorization")?.replace("Bearer ","");if(!r)return c("Authentication required","AUTH_REQUIRED",401);let t=await l.e8.verifyAccessToken(r);if(!t.success||!t.user)return c("Invalid or expired token","INVALID_TOKEN",401);if(!["super_admin","admin"].includes(t.user.role))return c("Insufficient permissions","INSUFFICIENT_PERMISSIONS",403);let i=a.id;if(null!==u.ki)try{if(!await u.cf.deleteProduct(i))return c("Product not found","PRODUCT_NOT_FOUND",404);return d(null,"Product deleted successfully",{source:"d1_database",deleted_by:t.user.username,product_id:i})}catch(e){return console.error("D1 database error:",e),c("Failed to delete product from database","DATABASE_ERROR",500)}return console.log("⚠️ D1 database not available - mock delete"),d(null,"Product deleted successfully (development mode)",{source:"fallback",deleted_by:t.user.username,product_id:i})}catch(e){return console.error("❌ DELETE /api/products/[id] error:",e),c("Error deleting product","DELETE_ERROR",500)}}let f=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/products/[id]/route",pathname:"/api/products/[id]",filename:"route",bundlePath:"app/api/products/[id]/route"},resolvedPagePath:"/Users/denizhan/Documents/Windsurf/protekanalitik/src/app/api/products/[id]/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:_,staticGenerationAsyncStorage:y,serverHooks:v,headerHooks:b,staticGenerationBailout:D}=f,E="/api/products/[id]/route";function h(){return(0,s.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:y})}}};var a=require("../../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[1638,6206,5669,6458],()=>r(7349));module.exports=t})();