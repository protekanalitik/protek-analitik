(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9091],{3007:function(e,a,r){Promise.resolve().then(r.bind(r,4069))},4069:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return b}});var t=r(7437),s=r(2265),n=r(1396),l=r.n(n),i=r(6691),c=r.n(i),o=r(4033),d=r(4992),m=r(6551),h=r(9010),u=r(6610),x=r(3298);let g=s.forwardRef(function({title:e,titleId:a,...r},t){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"}))});var f=r(6689);let p=s.forwardRef(function({title:e,titleId:a,...r},t){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))});var j=r(9874);let y=[{name:"Dashboard",href:"/admin",icon:d.Z},{name:"\xdcr\xfcnler",href:"/admin/products",icon:m.Z},{name:"Kategoriler",href:"/admin/categories",icon:h.Z},{name:"Kaynaklar",href:"/admin/resources",icon:u.Z},{name:"İletişim Bilgileri",href:"/admin/contact",icon:x.Z},{name:"İletişim Mesajları",href:"/admin/contact/messages",icon:g}];function b(e){let{children:a}=e,[r,n]=(0,s.useState)(!1),i=(0,o.usePathname)(),{isAuthenticated:d,loading:m,user:h,error:u,logout:x,redirectToLogin:g}=function(){let[e,a]=(0,s.useState)(!1),[r,t]=(0,s.useState)(!0),[n,l]=(0,s.useState)(null),[i,c]=(0,s.useState)(null),d=(0,o.useRouter)(),m=(0,s.useCallback)(async()=>{try{t(!0),c(null);let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let r=await e.json();if(r.success&&r.data.user)return a(!0),l(r.data.user),!0}let r=await fetch("/api/auth/refresh",{method:"POST",credentials:"include"});if(r.ok){let e=await r.json();if(e.success&&e.data.user)return a(!0),l(e.data.user),!0}return a(!1),l(null),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),!1}catch(e){return console.error("Auth check error:",e),c("Kimlik doğrulama kontrol\xfc sırasında hata oluştu"),a(!1),l(null),!1}finally{t(!1)}},[]),h=async function(e,r){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{t(!0),c(null);let n=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({usernameOrEmail:e,password:r,rememberMe:s})}),i=await n.json();if(i.success)return a(!0),l(i.data.user),localStorage.setItem("accessToken",i.data.accessToken),localStorage.setItem("refreshToken",i.data.refreshToken),localStorage.setItem("user",JSON.stringify(i.data.user)),{success:!0,user:i.data.user};return c(i.error||"Giriş başarısız"),{success:!1,error:i.error}}catch(a){let e="Bağlantı hatası oluştu";return c(e),{success:!1,error:e}}finally{t(!1)}},u=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout API error:",e)}finally{a(!1),l(null),c(null),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),d.push("/login")}},x=async()=>{try{let e=await fetch("/api/auth/refresh",{method:"POST",credentials:"include"});if(e.ok){let a=await e.json();if(a.success)return localStorage.setItem("accessToken",a.data.accessToken),localStorage.setItem("user",JSON.stringify(a.data.user)),!0}return!1}catch(e){return console.error("Token refresh error:",e),!1}};return(0,s.useEffect)(()=>{m()},[m]),{isAuthenticated:e,loading:r,user:n,error:i,login:h,logout:u,redirectToLogin:()=>{let e=window.location.pathname,a="/login"===e?"/login":"/login?redirect=".concat(encodeURIComponent(e));d.push(a)},checkAuth:m,refreshToken:x,hasRole:e=>{if(!n)return!1;let a={viewer:1,editor:2,admin:3,super_admin:4};return a[n.role]>=a[e]}}}();return m?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Kimlik doğrulama kontrol ediliyor..."})]})}):u?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[(0,t.jsx)("p",{className:"font-medium",children:"Kimlik Doğrulama Hatası"}),(0,t.jsx)("p",{className:"text-sm",children:u})]}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition-colors",children:"Tekrar Dene"})]})}):d?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,t.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(r?"":"hidden"),children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>n(!1)}),(0,t.jsxs)("div",{className:"fixed left-0 top-0 h-full w-64 bg-white shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,t.jsx)(c(),{src:"/images/logo-protek.png",alt:"Protek Analitik Logo",width:80,height:80,className:"w-20 h-20 object-contain"}),(0,t.jsx)("button",{onClick:()=>n(!1),className:"p-2 rounded-md text-gray-400 hover:text-gray-600",children:(0,t.jsx)(f.Z,{className:"w-5 h-5"})})]}),(0,t.jsx)("nav",{className:"p-4",children:(0,t.jsx)("ul",{className:"space-y-2",children:y.map(e=>{let a=i===e.href;return(0,t.jsx)("li",{children:(0,t.jsxs)(l(),{href:e.href,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(a?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),onClick:()=>n(!1),children:[(0,t.jsx)(e.icon,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:e.name})]})},e.name)})})}),(0,t.jsx)("div",{className:"absolute bottom-4 left-4 right-4",children:(0,t.jsxs)(l(),{href:"/",className:"flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:[(0,t.jsx)(p,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Ana Siteye D\xf6n"})]})})]})]}),(0,t.jsxs)("div",{className:"hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 lg:bg-white lg:border-r lg:border-gray-200",children:[(0,t.jsx)("div",{className:"flex items-center justify-center h-20 px-4 py-3 border-b border-gray-200",children:(0,t.jsx)(c(),{src:"/images/logo-protek.png",alt:"Protek Analitik Logo",width:120,height:120,className:"w-28 h-28 object-contain"})}),(0,t.jsx)("nav",{className:"flex-1 p-6",children:(0,t.jsx)("ul",{className:"space-y-2",children:y.map(e=>{let a=i===e.href;return(0,t.jsx)("li",{children:(0,t.jsxs)(l(),{href:e.href,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(a?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,t.jsx)(e.icon,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:e.name})]})},e.name)})})}),(0,t.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,t.jsxs)(l(),{href:"/",className:"flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:[(0,t.jsx)(p,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Ana Siteye D\xf6n"})]})})]}),(0,t.jsxs)("div",{className:"flex-1 lg:ml-64",children:[(0,t.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 py-4 lg:px-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>n(!0),className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-600",children:(0,t.jsx)(j.Z,{className:"w-6 h-6"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Protek Analitik CMS"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,t.jsx)("span",{children:"Hoş geldiniz, "}),(0,t.jsx)("span",{className:"font-medium",children:(null==h?void 0:h.first_name)&&(null==h?void 0:h.last_name)?"".concat(h.first_name," ").concat(h.last_name):(null==h?void 0:h.username)||"Kullanıcı"}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 ml-2",children:["(",null==h?void 0:h.role,")"]})]}),(0,t.jsxs)("button",{onClick:x,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,t.jsx)(p,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"\xc7ıkış"})]})]})]})}),(0,t.jsx)("main",{className:"flex-1",children:(0,t.jsx)("div",{className:"p-4 lg:p-8 max-w-full overflow-x-auto",children:a})})]})]}):(g(),(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("p",{className:"text-gray-600",children:"Giriş sayfasına y\xf6nlendiriliyorsunuz..."})})}))}}},function(e){e.O(0,[1176,2695,2971,4938,1744],function(){return e(e.s=3007)}),_N_E=e.O()}]);