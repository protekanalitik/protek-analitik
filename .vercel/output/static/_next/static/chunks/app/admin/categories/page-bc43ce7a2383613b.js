(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4331],{9780:function(e,s,a){Promise.resolve().then(a.bind(a,488))},488:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return u}});var r=a(7437),t=a(2265);let l=(0,t.lazy)(()=>Promise.all([a.e(3466),a.e(7239),a.e(9349)]).then(a.bind(a,7239)).then(e=>({default:e.PlusIcon}))),i=(0,t.lazy)(()=>Promise.all([a.e(3466),a.e(7239),a.e(9349)]).then(a.bind(a,7239)).then(e=>({default:e.MagnifyingGlassIcon}))),n=(0,t.lazy)(()=>Promise.all([a.e(3466),a.e(7239),a.e(9349)]).then(a.bind(a,7239)).then(e=>({default:e.PencilIcon}))),c=(0,t.lazy)(()=>Promise.all([a.e(3466),a.e(7239),a.e(9349)]).then(a.bind(a,7239)).then(e=>({default:e.TrashIcon}))),d=(0,t.lazy)(()=>Promise.all([a.e(3466),a.e(7239),a.e(9349)]).then(a.bind(a,7239)).then(e=>({default:e.EyeIcon}))),o=(0,t.lazy)(()=>Promise.all([a.e(3466),a.e(7239),a.e(9349)]).then(a.bind(a,7239)).then(e=>({default:e.CogIcon}))),m=(0,t.lazy)(()=>Promise.all([a.e(3466),a.e(7239),a.e(9349)]).then(a.bind(a,7239)).then(e=>({default:e.ChevronRightIcon})));function u(){let[e,s]=(0,t.useState)([]),[a,u]=(0,t.useState)(!0),[g,x]=(0,t.useState)(""),[h,b]=(0,t.useState)(null),[y,p]=(0,t.useState)(!1),[f,j]=(0,t.useState)(!1),[N,k]=(0,t.useState)(null),[v,w]=(0,t.useState)(null),[C,z]=(0,t.useState)({name:"",description:"",key:""}),[K,S]=(0,t.useState)({name:"",description:"",key:"",categoryKey:""}),_=async()=>{try{u(!0);let e=await fetch("/api/categories"),a=await e.json();a.success&&Array.isArray(a.data)?s(a.data):console.error("Failed to fetch categories:",a)}catch(e){console.error("Error fetching categories:",e)}finally{u(!1)}};(0,t.useEffect)(()=>{_()},[]);let A=e.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())||e.description.toLowerCase().includes(g.toLowerCase())),E=a=>{confirm("Bu kategoriyi silmek istediğinizden emin misiniz? Alt kategoriler ve \xfcr\xfcnler de silinecektir.")&&(s(e.filter(e=>e.key!==a)),alert("Kategori başarıyla silindi!"))},P=(a,r)=>{confirm("Bu alt kategoriyi silmek istediğinizden emin misiniz? İ\xe7indeki \xfcr\xfcnler de silinecektir.")&&(s(e.map(e=>e.key===a?{...e,subcategories:e.subcategories.filter(e=>e.key!==r)}:e)),alert("Alt kategori başarıyla silindi!"))},L=e=>e.subcategories.reduce((e,s)=>e+s.products.length,0),I=e=>{z({name:e.name,description:e.description,key:e.key}),k(e),p(!0)},O=e=>{S({name:"",description:"",key:"",categoryKey:e}),w(null),j(!0)},B=(e,s)=>{S({name:s.name,description:s.description,key:s.key,categoryKey:e}),w({category:e,subcategory:s}),j(!0)};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Kategori Y\xf6netimi"}),(0,r.jsx)("p",{className:"text-gray-600",children:"\xdcr\xfcn kategorilerini ve alt kategorilerini y\xf6netin"})]}),(0,r.jsx)("div",{className:"flex space-x-3",children:(0,r.jsxs)("button",{onClick:()=>{z({name:"",description:"",key:""}),k(null),p(!0)},className:"inline-flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{className:"w-5 h-5 bg-white/20 rounded animate-pulse"}),children:(0,r.jsx)(l,{className:"w-5 h-5"})}),(0,r.jsx)("span",{children:"Yeni Kategori"})]})})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"relative max-w-md",children:[(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 bg-gray-200 rounded animate-pulse"}),children:(0,r.jsx)(i,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})}),(0,r.jsx)("input",{type:"text",placeholder:"Kategori ara...",value:g,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),(0,r.jsx)("div",{className:"space-y-4",children:A.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>b(h===e.key?null:e.key),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{className:"w-5 h-5 bg-gray-200 rounded animate-pulse"}),children:(0,r.jsx)(m,{className:"w-5 h-5 text-gray-500 transition-transform ".concat(h===e.key?"rotate-90":"")})})}),(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{className:"w-6 h-6 bg-blue-200 rounded animate-pulse"}),children:(0,r.jsx)(o,{className:"w-6 h-6 text-blue-600"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.subcategories.length," alt kategori"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[L(e)," \xfcr\xfcn"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"G\xf6r\xfcnt\xfcle",children:(0,r.jsx)(d,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>I(e),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"D\xfczenle",children:(0,r.jsx)(n,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>E(e.key),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Sil",children:(0,r.jsx)(c,{className:"w-4 h-4"})})]})]})]})}),h===e.key&&(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Alt Kategoriler"}),(0,r.jsxs)("button",{onClick:()=>O(e.key),className:"inline-flex items-center space-x-1 text-sm bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 transition-colors",children:[(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{className:"w-4 h-4 bg-white/20 rounded animate-pulse"}),children:(0,r.jsx)(l,{className:"w-4 h-4"})}),(0,r.jsx)("span",{children:"Alt Kategori Ekle"})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[e.subcategories.map(s=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:s.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:s.description})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[s.products.length," \xfcr\xfcn"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("button",{className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"G\xf6r\xfcnt\xfcle",children:(0,r.jsx)(d,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>B(e.key,s),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"D\xfczenle",children:(0,r.jsx)(n,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>P(e.key,s.key),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Sil",children:(0,r.jsx)(c,{className:"w-4 h-4"})})]})]})]},s.key)),0===e.subcategories.length&&(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Bu kategoride hen\xfcz alt kategori bulunmuyor"})]})]})]},e.key))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Ana Kategori"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.reduce((e,s)=>e+s.subcategories.length,0)}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Alt Kategori"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.reduce((e,s)=>e+L(s),0)}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Toplam \xdcr\xfcn"})]})]}),y&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:N?"Kategori D\xfczenle":"Yeni Kategori"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori Adı *"}),(0,r.jsx)("input",{type:"text",value:C.name,onChange:e=>z(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Kategori adını girin"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"A\xe7ıklama *"}),(0,r.jsx)("textarea",{value:C.description,onChange:e=>z(s=>({...s,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Kategori a\xe7ıklamasını girin"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"İptal"}),(0,r.jsx)("button",{onClick:()=>{if(!C.name.trim()||!C.description.trim()){alert("L\xfctfen t\xfcm alanları doldurun.");return}let a=C.key||C.name.toLowerCase().replace(/[^a-z0-9]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");if(N)s(e.map(e=>e.key===N.key?{...e,name:C.name,description:C.description}:e)),alert("Kategori başarıyla g\xfcncellendi!");else{if(e.some(e=>e.key===a)){alert("Bu anahtar zaten kullanılıyor. L\xfctfen farklı bir isim se\xe7in.");return}s([...e,{key:a,name:C.name,description:C.description,icon:"⚙️",subcategories:[]}]),alert("Kategori başarıyla eklendi!")}p(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:N?"G\xfcncelle":"Ekle"})]})]})}),f&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:v?"Alt Kategori D\xfczenle":"Yeni Alt Kategori"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alt Kategori Adı *"}),(0,r.jsx)("input",{type:"text",value:K.name,onChange:e=>S(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Alt kategori adını girin"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"A\xe7ıklama *"}),(0,r.jsx)("textarea",{value:K.description,onChange:e=>S(s=>({...s,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Alt kategori a\xe7ıklamasını girin"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"İptal"}),(0,r.jsx)("button",{onClick:()=>{if(!K.name.trim()||!K.description.trim()){alert("L\xfctfen t\xfcm alanları doldurun.");return}let a=K.key||K.name.toLowerCase().replace(/[^a-z0-9]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");if(v)s(e.map(e=>e.key===K.categoryKey?{...e,subcategories:e.subcategories.map(e=>e.key===v.subcategory.key?{...e,name:K.name,description:K.description}:e)}:e)),alert("Alt kategori başarıyla g\xfcncellendi!");else{let r=e.find(e=>e.key===K.categoryKey);if(null==r?void 0:r.subcategories.some(e=>e.key===a)){alert("Bu anahtar zaten kullanılıyor. L\xfctfen farklı bir isim se\xe7in.");return}s(e.map(e=>e.key===K.categoryKey?{...e,subcategories:[...e.subcategories,{key:a,name:K.name,description:K.description,products:[]}]}:e)),alert("Alt kategori başarıyla eklendi!")}j(!1)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:v?"G\xfcncelle":"Ekle"})]})]})})]})}},622:function(e,s,a){"use strict";var r=a(2265),t=Symbol.for("react.element"),l=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,s,a){var r,l={},d=null,o=null;for(r in void 0!==a&&(d=""+a),void 0!==s.key&&(d=""+s.key),void 0!==s.ref&&(o=s.ref),s)i.call(s,r)&&!c.hasOwnProperty(r)&&(l[r]=s[r]);if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===l[r]&&(l[r]=s[r]);return{$$typeof:t,type:e,key:d,ref:o,props:l,_owner:n.current}}s.Fragment=l,s.jsx=d,s.jsxs=d},7437:function(e,s,a){"use strict";e.exports=a(622)}},function(e){e.O(0,[2971,993,1744],function(){return e(e.s=9780)}),_N_E=e.O()}]);