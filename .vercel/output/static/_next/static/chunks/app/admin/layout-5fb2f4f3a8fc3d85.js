(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9091],{3007:function(e,t,r){Promise.resolve().then(r.bind(r,1400))},1400:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k},dynamic:function(){return b},runtime:function(){return w}});var a=r(7437),n=r(2265),s=r(1396),l=r.n(s),i=r(6691),o=r.n(i),c=r(4033),d=r(8356),m=r(9874),u=r(3298),h=r(9010),x=r(6551),f=r(6610),g=r(4992),p=r(4438),v=r(1615),j=r(6689);let y=[{name:"Dashboard",href:"/admin",icon:g.Z},{name:"\xdcr\xfcnler",href:"/admin/products",icon:x.Z},{name:"Kategoriler",href:"/admin/categories",icon:h.Z},{name:"Kaynaklar",href:"/admin/resources",icon:f.Z},{name:"İletişim Bilgileri",href:"/admin/contact",icon:u.Z},{name:"İletişim Mesajları",href:"/admin/contact/messages",icon:p.Z},{name:"Edge Runtime",href:"/admin/edge-runtime",icon:v.Z}],b="force-dynamic",w="edge";function k(e){let{children:t}=e,[r,s]=(0,n.useState)(!1),i=(0,c.usePathname)(),{isAuthenticated:u,loading:h,user:x,error:f,logout:g,redirectToLogin:p}=function(){let[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)(!0),[s,l]=(0,n.useState)(null),[i,o]=(0,n.useState)(null),d=(0,c.useRouter)(),m=(0,n.useCallback)(async()=>{try{a(!0),o(null);let e=await fetch("/api/auth/me",{credentials:"include"});if(e.ok){let r=await e.json();if(r.success&&r.data.user)return t(!0),l(r.data.user),!0}let r=await fetch("/api/auth/refresh",{method:"POST",credentials:"include"});if(r.ok){let e=await r.json();if(e.success&&e.data.user)return t(!0),l(e.data.user),!0}return t(!1),l(null),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),!1}catch(e){return console.error("Auth check error:",e),o("Kimlik doğrulama kontrol\xfc sırasında hata oluştu"),t(!1),l(null),!1}finally{a(!1)}},[]),u=async function(e,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{a(!0),o(null);let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({usernameOrEmail:e,password:r,rememberMe:n})}),i=await s.json();if(i.success)return t(!0),l(i.data.user),localStorage.setItem("accessToken",i.data.accessToken),localStorage.setItem("refreshToken",i.data.refreshToken),localStorage.setItem("user",JSON.stringify(i.data.user)),{success:!0,user:i.data.user};return o(i.error||"Giriş başarısız"),{success:!1,error:i.error}}catch(t){let e="Bağlantı hatası oluştu";return o(e),{success:!1,error:e}}finally{a(!1)}},h=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout API error:",e)}finally{t(!1),l(null),o(null),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),d.push("/login")}},x=async()=>{try{let e=await fetch("/api/auth/refresh",{method:"POST",credentials:"include"});if(e.ok){let t=await e.json();if(t.success)return localStorage.setItem("accessToken",t.data.accessToken),localStorage.setItem("user",JSON.stringify(t.data.user)),!0}return!1}catch(e){return console.error("Token refresh error:",e),!1}};return(0,n.useEffect)(()=>{m()},[m]),{isAuthenticated:e,loading:r,user:s,error:i,login:u,logout:h,redirectToLogin:()=>{let e=window.location.pathname,t="/login"===e?"/login":"/login?redirect=".concat(encodeURIComponent(e));d.push(t)},checkAuth:m,refreshToken:x,hasRole:e=>{if(!s)return!1;let t={viewer:1,editor:2,admin:3,super_admin:4};return t[s.role]>=t[e]}}}();return h?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Kimlik doğrulama kontrol ediliyor..."})]})}):f?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[(0,a.jsx)("p",{className:"font-medium",children:"Kimlik Doğrulama Hatası"}),(0,a.jsx)("p",{className:"text-sm",children:f})]}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition-colors",children:"Tekrar Dene"})]})}):u?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,a.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(r?"":"hidden"),children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>s(!1)}),(0,a.jsxs)("div",{className:"fixed left-0 top-0 h-full w-64 bg-white shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsx)(o(),{src:"/images/logo-protek.png",alt:"Protek Analitik Logo",width:80,height:80,className:"w-20 h-20 object-contain"}),(0,a.jsx)("button",{onClick:()=>s(!1),className:"p-2 rounded-md text-gray-400 hover:text-gray-600",children:(0,a.jsx)(j.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("nav",{className:"p-4",children:(0,a.jsx)("ul",{className:"space-y-2",children:y.map(e=>{let t=i===e.href;return(0,a.jsx)("li",{children:(0,a.jsxs)(l(),{href:e.href,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(t?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),onClick:()=>s(!1),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:e.name})]})},e.name)})})}),(0,a.jsx)("div",{className:"absolute bottom-4 left-4 right-4",children:(0,a.jsxs)(l(),{href:"/",className:"flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Ana Siteye D\xf6n"})]})})]})]}),(0,a.jsxs)("div",{className:"hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 lg:bg-white lg:border-r lg:border-gray-200",children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-20 px-4 py-3 border-b border-gray-200",children:(0,a.jsx)(o(),{src:"/images/logo-protek.png",alt:"Protek Analitik Logo",width:120,height:120,className:"w-28 h-28 object-contain"})}),(0,a.jsx)("nav",{className:"flex-1 p-6",children:(0,a.jsx)("ul",{className:"space-y-2",children:y.map(e=>{let t=i===e.href;return(0,a.jsx)("li",{children:(0,a.jsxs)(l(),{href:e.href,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(t?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:e.name})]})},e.name)})})}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,a.jsxs)(l(),{href:"/",className:"flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Ana Siteye D\xf6n"})]})})]}),(0,a.jsxs)("div",{className:"flex-1 lg:ml-64",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 py-4 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("button",{onClick:()=>s(!0),className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-600",children:(0,a.jsx)(m.Z,{className:"w-6 h-6"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Protek Analitik CMS"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{children:"Hoş geldiniz, "}),(0,a.jsx)("span",{className:"font-medium",children:(null==x?void 0:x.first_name)&&(null==x?void 0:x.last_name)?"".concat(x.first_name," ").concat(x.last_name):(null==x?void 0:x.username)||"Kullanıcı"}),(0,a.jsxs)("span",{className:"text-xs text-gray-400 ml-2",children:["(",null==x?void 0:x.role,")"]})]}),(0,a.jsxs)("button",{onClick:g,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"\xc7ıkış"})]})]})]})}),(0,a.jsx)("main",{className:"flex-1",children:(0,a.jsx)("div",{className:"p-4 lg:p-8 max-w-full overflow-x-auto",children:t})})]})]}):(p(),(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Giriş sayfasına y\xf6nlendiriliyorsunuz..."})})}))}},8356:function(e,t,r){"use strict";var a=r(2265);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))});t.Z=n},9874:function(e,t,r){"use strict";var a=r(2265);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))});t.Z=n},3298:function(e,t,r){"use strict";var a=r(2265);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))});t.Z=n},9010:function(e,t,r){"use strict";var a=r(2265);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))});t.Z=n},4438:function(e,t,r){"use strict";var a=r(2265);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"}))});t.Z=n},1615:function(e,t,r){"use strict";var a=r(2265);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))});t.Z=n},6689:function(e,t,r){"use strict";var a=r(2265);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});t.Z=n}},function(e){e.O(0,[1176,9751,2971,993,1744],function(){return e(e.s=3007)}),_N_E=e.O()}]);