var p={},ee=(Q,X,Y)=>(p.__chunk_2029=(y,c,t)=>{"use strict";t.d(c,{Z:()=>r});var e=t(5579);let r=e.forwardRef(function({title:l,titleId:o,...h},m){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":o},h),l?e.createElement("title",{id:o},l):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"}))})},p.__chunk_5676=(y,c,t)=>{"use strict";t.d(c,{Z:()=>r});var e=t(5579);let r=e.forwardRef(function({title:l,titleId:o,...h},m){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":o},h),l?e.createElement("title",{id:o},l):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))})},p.__chunk_7125=(y,c,t)=>{"use strict";t.r(c),t.d(c,{$$typeof:()=>o,__esModule:()=>l,default:()=>v,dynamic:()=>m,runtime:()=>k});var e=t(2568);let r=(0,e.D)(String.raw`/Users/denizhan/Documents/Windsurf/protekanalitik/src/app/admin/layout.tsx`),{__esModule:l,$$typeof:o}=r,h=r.default,m=(0,e.D)(String.raw`/Users/denizhan/Documents/Windsurf/protekanalitik/src/app/admin/layout.tsx#dynamic`),k=(0,e.D)(String.raw`/Users/denizhan/Documents/Windsurf/protekanalitik/src/app/admin/layout.tsx#runtime`),v=h},p.__chunk_3061=(y,c,t)=>{"use strict";t.r(c),t.d(c,{default:()=>z,dynamic:()=>$,runtime:()=>M});var e=t(6485),r=t(5579),l=t(6226),o=t(7237),h=t(6396),m=t(5676),k=t(4294),v=t(327),A=t(7213),C=t(4738),D=t(2883),E=t(6270),L=t(2029),O=t(8103),P=t(476);let S=[{name:"Dashboard",href:"/admin",icon:E.Z},{name:"\xDCr\xFCnler",href:"/admin/products",icon:C.Z},{name:"Kategoriler",href:"/admin/categories",icon:A.Z},{name:"Kaynaklar",href:"/admin/resources",icon:D.Z},{name:"\u0130leti\u015Fim Bilgileri",href:"/admin/contact",icon:v.Z},{name:"\u0130leti\u015Fim Mesajlar\u0131",href:"/admin/contact/messages",icon:L.Z},{name:"Edge Runtime",href:"/admin/edge-runtime",icon:O.Z}],$="force-dynamic",M="edge";function z({children:K}){let[R,j]=(0,r.useState)(!1),_=(0,h.usePathname)(),{isAuthenticated:W,loading:B,user:x,error:T,logout:U,redirectToLogin:H}=function(){let[s,d]=(0,r.useState)(!1),[J,b]=(0,r.useState)(!0),[N,g]=(0,r.useState)(null),[V,f]=(0,r.useState)(null),I=(0,h.useRouter)(),w=(0,r.useCallback)(async()=>{try{b(!0),f(null);let a=await fetch("/api/auth/me",{credentials:"include"});if(a.ok){let u=await a.json();if(u.success&&u.data.user)return d(!0),g(u.data.user),!0}let n=await fetch("/api/auth/refresh",{method:"POST",credentials:"include"});if(n.ok){let u=await n.json();if(u.success&&u.data.user)return d(!0),g(u.data.user),!0}return d(!1),g(null),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),!1}catch(a){return console.error("Auth check error:",a),f("Kimlik do\u011Frulama kontrol\xFC s\u0131ras\u0131nda hata olu\u015Ftu"),d(!1),g(null),!1}finally{b(!1)}},[]),G=async(a,n,u=!1)=>{try{b(!0),f(null);let Z=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({usernameOrEmail:a,password:n,rememberMe:u})}),i=await Z.json();return i.success?(d(!0),g(i.data.user),localStorage.setItem("accessToken",i.data.accessToken),localStorage.setItem("refreshToken",i.data.refreshToken),localStorage.setItem("user",JSON.stringify(i.data.user)),{success:!0,user:i.data.user}):(f(i.error||"Giri\u015F ba\u015Far\u0131s\u0131z"),{success:!1,error:i.error})}catch{let i="Ba\u011Flant\u0131 hatas\u0131 olu\u015Ftu";return f(i),{success:!1,error:i}}finally{b(!1)}},q=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(a){console.error("Logout API error:",a)}finally{d(!1),g(null),f(null),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),I.push("/login")}},F=async()=>{try{let a=await fetch("/api/auth/refresh",{method:"POST",credentials:"include"});if(a.ok){let n=await a.json();if(n.success)return localStorage.setItem("accessToken",n.data.accessToken),localStorage.setItem("user",JSON.stringify(n.data.user)),!0}return!1}catch(a){return console.error("Token refresh error:",a),!1}};return(0,r.useEffect)(()=>{w()},[w]),{isAuthenticated:s,loading:J,user:N,error:V,login:G,logout:q,redirectToLogin:()=>{let a=window.location.pathname,n=a==="/login"?"/login":`/login?redirect=${encodeURIComponent(a)}`;I.push(n)},checkAuth:w,refreshToken:F,hasRole:a=>{if(!N)return!1;let n={viewer:1,editor:2,admin:3,super_admin:4};return n[N.role]>=n[a]}}}();return B?(0,e.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,e.jsx)("p",{className:"text-gray-600",children:"Kimlik do\u011Frulama kontrol ediliyor..."})]})}):T?(0,e.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[(0,e.jsx)("p",{className:"font-medium",children:"Kimlik Do\u011Frulama Hatas\u0131"}),(0,e.jsx)("p",{className:"text-sm",children:T})]}),(0,e.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition-colors",children:"Tekrar Dene"})]})}):W?(0,e.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,e.jsxs)("div",{className:`fixed inset-0 z-50 lg:hidden ${R?"":"hidden"}`,children:[(0,e.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>j(!1)}),(0,e.jsxs)("div",{className:"fixed left-0 top-0 h-full w-64 bg-white shadow-lg",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,e.jsx)(o.default,{src:"/images/logo-protek.png",alt:"Protek Analitik Logo",width:80,height:80,className:"w-20 h-20 object-contain"}),(0,e.jsx)("button",{onClick:()=>j(!1),className:"p-2 rounded-md text-gray-400 hover:text-gray-600",children:(0,e.jsx)(P.Z,{className:"w-5 h-5"})})]}),(0,e.jsx)("nav",{className:"p-4",children:(0,e.jsx)("ul",{className:"space-y-2",children:S.map(s=>{let d=_===s.href;return(0,e.jsx)("li",{children:(0,e.jsxs)(l.default,{href:s.href,className:`flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${d?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,onClick:()=>j(!1),children:[(0,e.jsx)(s.icon,{className:"w-5 h-5"}),(0,e.jsx)("span",{children:s.name})]})},s.name)})})}),(0,e.jsx)("div",{className:"absolute bottom-4 left-4 right-4",children:(0,e.jsxs)(l.default,{href:"/",className:"flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:[(0,e.jsx)(m.Z,{className:"w-5 h-5"}),(0,e.jsx)("span",{children:"Ana Siteye D\xF6n"})]})})]})]}),(0,e.jsxs)("div",{className:"hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 lg:bg-white lg:border-r lg:border-gray-200",children:[(0,e.jsx)("div",{className:"flex items-center justify-center h-20 px-4 py-3 border-b border-gray-200",children:(0,e.jsx)(o.default,{src:"/images/logo-protek.png",alt:"Protek Analitik Logo",width:120,height:120,className:"w-28 h-28 object-contain"})}),(0,e.jsx)("nav",{className:"flex-1 p-6",children:(0,e.jsx)("ul",{className:"space-y-2",children:S.map(s=>{let d=_===s.href;return(0,e.jsx)("li",{children:(0,e.jsxs)(l.default,{href:s.href,className:`flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${d?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[(0,e.jsx)(s.icon,{className:"w-5 h-5"}),(0,e.jsx)("span",{children:s.name})]})},s.name)})})}),(0,e.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,e.jsxs)(l.default,{href:"/",className:"flex items-center space-x-3 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:[(0,e.jsx)(m.Z,{className:"w-5 h-5"}),(0,e.jsx)("span",{children:"Ana Siteye D\xF6n"})]})})]}),(0,e.jsxs)("div",{className:"flex-1 lg:ml-64",children:[(0,e.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 py-4 lg:px-8",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsx)("button",{onClick:()=>j(!0),className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-600",children:(0,e.jsx)(k.Z,{className:"w-6 h-6"})}),(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Protek Analitik CMS"}),(0,e.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,e.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,e.jsx)("span",{children:"Ho\u015F geldiniz, "}),(0,e.jsx)("span",{className:"font-medium",children:x?.first_name&&x?.last_name?`${x.first_name} ${x.last_name}`:x?.username||"Kullan\u0131c\u0131"}),(0,e.jsxs)("span",{className:"text-xs text-gray-400 ml-2",children:["(",x?.role,")"]})]}),(0,e.jsxs)("button",{onClick:U,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,e.jsx)(m.Z,{className:"w-4 h-4"}),(0,e.jsx)("span",{children:"\xC7\u0131k\u0131\u015F"})]})]})]})}),(0,e.jsx)("main",{className:"flex-1",children:(0,e.jsx)("div",{className:"p-4 lg:p-8 max-w-full overflow-x-auto",children:K})})]})]}):(H(),(0,e.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,e.jsx)("div",{className:"text-center",children:(0,e.jsx)("p",{className:"text-gray-600",children:"Giri\u015F sayfas\u0131na y\xF6nlendiriliyorsunuz..."})})}))}},p.__chunk_5215=(y,c,t)=>{Promise.resolve().then(t.bind(t,3061))},p);export{ee as __getNamedExports};
